<section class="section-header has-tabs">
    <div class="container">
        <div class="row">
            <div class="col-sm-8">
                <h1><?=$this->translate('Email');?></h1>
            </div>
            <div class="col-sm-4">
                <a href="<?=$this->url(array('controller' => 'mail-send', 'action' => 'index'));?>" class="btn btn-primary cta"><span class="glyphicon glyphicon-pencil"></span> <?=$this->translate('New Email');?></a>
            </div>
        </div>
        <?=$this->emailTabs('settings');?>
    </div>
</section>
<section class="section-content">
    <div class="container">
        <div class="row">
            <div class="sidebar">

                <?=$this->emailSettingsNavigation('components');?>

            </div>
            <div class="content">

                <a href="<?=$this->url(['action' => 'detail', 'id' => null]);?>" class="btn btn-default pull-right">
                    <span class="glyphicon glyphicon-plus-sign"></span>
                    <?=$this->translate('New Email Component');?>
                </a>
                <h2><?=$this->translate('Email Components');?></h2>

                <?php if (!count($this->components)): ?>
                    <p class="alert alert-info">
                        <span class="glyphicon glyphicon-info-sign"></span>
                        <?=$this->translate('There are no email components yet.');?>
                    </p>
                <?php else: ?>

                    <form method="<?=$this->form->getMethod()?>" action="<?=$this->url(array('action' => 'delete'));?>">
                        <?=$this->form->getElement('list_control_csrf_token');?>
                        <table class="table" data-view="table">
                            <thead>
                                <tr>
                                    <th class="table-cell-id" data-toggle="sort" tabindex="0">#</th>
                                    <th data-toggle="sort" data-order="default" tabindex="0"><?=$this->translate('Name');?></th>
                                    <th></th>
                                </tr>
                            </thead>
                            <tbody>
                                <?php foreach ($this->components as $component): ?>
                                    <tr>
                                        <td class="table-cell-id"><?=$component->id;?></td>
                                        <td><?=$component->name;?></td>
                                        <td class="table-cell-actions">
                                            <a href="<?=$this->url(array('action' => 'detail', 'id' => $component->id));?>" class="item-action" title="<?=$this->translate('Edit component');?>">
                                                <span class="glyphicon glyphicon-pencil"></span>
                                            </a>
                                            <button
                                                name="deleteId"
                                                type="submit"
                                                class="item-action item-action-danger"
                                                value="<?=$component->id;?>"
                                                title="<?=$this->translate('Delete component');?>"
                                                data-toggle="confirm"
                                                data-confirm-message="<?=$this->translate('Delete email component?');?>"
                                            >
                                                <span class="glyphicon glyphicon-trash"></span>
                                            </button>
                                        </td>
                                    </tr>
                                <?php endforeach; ?>
                            </tbody>
                        </table>
                    </form>

                <?php endif; ?>

            </div>
        </div>
    </div>
</section>
