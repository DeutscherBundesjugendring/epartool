<section class="section-header">
    <div class="container">
        <div class="row">
            <div class="col-sm-8">
                <h1><?=$this->translate('Media');?></h1>
            </div>
            <div class="col-sm-4">
                <a href="<?=$this->url(array('action' => 'upload'));?>" class="btn btn-primary cta"><span class="glyphicon glyphicon-upload"></span> <?=$this->translate('Upload');?></a>
            </div>
        </div>
    </div>
</section>
<section class="section-content">
    <div class="container">
        <div class="row">
            <div class="col-md-3">

                <?=$this->mediaNavigation('all');?>

            </div>
            <div class="col-md-9">

                <?php
                $gfx_test = array("jpg", "jpeg", "gif", "png", "svg");
                $doc_test = array("doc", "docx", "dot", "dotx", "odt", "ott", "rtf", "txt");
                $clc_test = array("xls", "xlsx", "xlst", "ods", "ots", "csv");
                $vid_test = array("avi", "divx", "flv", "mkv", "mov", "mpg", "mp4", "mp4v", "m4v", "ogv", "webm", "wmv", "3gp", "3g2");
                $aud_test = array("aac", "au", "flac", "mid", "mka", "mp3", "m4a", "m4b", "ogg", "snd", "wav", "wma");
                $prs_test = array("ppt", "pptx", "odp", "otp");
                $pdf_test = array("pdf", "epub", "mobi");
                $pck_test = array("zip", "rar", "tar", "7z");
                ?>

                <h2><?=$this->translate('All Media');?></h2>

                <?php if (!empty($this->files)): ?>
                    <div class="row">
                        <?php foreach ($this->files as $file):?>
                            <div class="col-xs-6 col-sm-4 col-lg-3">
                                <div class="thumbnail">
                                    <a href="<?=$this->directory?>/<?=$file['basename']?>" target="_blank" title="<?=$file['basename'];?>">
                                        <div class="thumbnail-image">
                                            <?php if (in_array(strtolower($file['extension']), $gfx_test)): ?>
                                                <!-- TODO use resized thumbnail -->
                                                <img src="<?=$this->directory?>/<?=$file['basename']?>" alt="<?=$this->translate('Preview');?>" />
                                            <?php else: ?>
                                                <img
                                                    src="
                                                <?php if (in_array(strtolower($file['extension']), $pdf_test)): ?>
                                                    <?=$this->baseUrl()?>/images/cystal_clear_mimetype_pdf.png
                                                <?php elseif (in_array(strtolower($file['extension']), $pck_test)): ?>
                                                    <?=$this->baseUrl()?>/images/crystal_clear_filesystem_folder_tar.png
                                                <?php elseif (in_array(strtolower($file['extension']), $doc_test)): ?>
                                                    <?=$this->baseUrl()?>/images/crystal_clear_mimetype_txt.png
                                                <?php elseif (in_array(strtolower($file['extension']), $prs_test)): ?>
                                                    <?=$this->baseUrl()?>/images/crystal_clear_app_display.png
                                                <?php elseif (in_array(strtolower($file['extension']), $vid_test)): ?>
                                                    <?=$this->baseUrl()?>/images/crystal_clear_mimetype_video.png
                                                <?php elseif (in_array(strtolower($file['extension']), $aud_test)): ?>
                                                    <?=$this->baseUrl()?>/images/crystal_clear_app_xmms.png
                                                <?php elseif (in_array(strtolower($file['extension']), $clc_test)): ?>
                                                    <?=$this->baseUrl()?>/images/crystal_clear_mimetype_spreadsheet.png
                                                <?php else: ?>
                                                    <?=$this->baseUrl()?>/images/crystal_clear_mimetype_encrypted.png
                                                <?php endif?>"
                                                    class="thumbnail-image-icon"
                                                    alt="<?=$this->translate('Preview');?>"
                                                    />
                                            <?php endif?>
                                        </div>
                                        <div class="caption">
                                            <h4 class="thumbnail-title"><?=$file['basename'];?></h4>
                                            <small class="text-muted">
                                                <!-- TODO file size view helper -->
                                                <?=$file['size'];?>&nbsp;kB<br />
                                                <!-- TODO upload time -->
                                            </small>
                                        </div>
                                    </a>
                                    <?=$file['deleteform']?>
                                </div>
                            </div>
                        <?php endforeach;?>
                    </div>
                <?php else: ?>
                    <p class="alert alert-info">
                        <span class="glyphicon glyphicon-info-sign"></span>
                        <?=$this->translate('No media has been uploaded yet.');?>
                    </p>
                <?php endif; ?>

            </div>
        </div>
    </div>
</section>
