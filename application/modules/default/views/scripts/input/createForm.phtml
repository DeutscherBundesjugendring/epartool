<form
    enctype="<?=$this->element->getEnctype();?>"
    method="<?=$this->element->getMethod();?>"
    class="well well-bordered well-accent text-center offset-bottom-large has-sticker hidden-print js-contribution-create-form"
>
    <?=$this->element->csrf_token_input->setDecorators(['ViewHelper']);?>

    <!-- Sticker -->
    <div class="sticker sticker-left hidden-print">
        <div class="sticker-label sticker-label-dark">
            <?=$this->translate('Participate');?>
        </div>
    </div>

    <h2 class="well-title offset-bottom-large">
        <?=$this->translate('Create new contribution');?>
    </h2>

    <?php $i = 0; ?>
    <?php foreach ($this->element->inputs->getSubForms() as $input) : ?>
        <?php if ($i > 0) : ?>
            <hr />
        <?php endif; ?>

        <fieldset class="offset-bottom">

            <!-- Counter -->
            <div class="text-right js-character-counter">
                <span id="inputs-<?=$input->getName();?>-thes_counter" class="counter">
                    <span class="counter-digit">3</span><span class="counter-digit">0</span><span class="counter-digit">0</span>
                </span>
            </div>

            <?=$input->getElements()['thes']->setDecorators(['ViewHelper']);?>

            <?php if ($this->element->getVideoEnabled()) : ?>
                <div class="form-inline form-inline-flex form-group text-left offset-top js-video-service">
                    <div class="form-group">
                        <?=$input->getElements()['video_service'];?>
                    </div>
                    <div class="form-group form-group-flex">
                        <div class="input-group input-group-full-xs">
                            <?=$input->getElements()['video_id'];?>
                        </div>
                    </div>
                </div>
                <?php if (count($input->getElement('video_id')->getErrors()) > 0) : ?>
                    <ul class="text-danger-block">
                        <?php foreach ($input->getElement('video_id')->getMessages() as $message) : ?>
                            <li><?=$message;?></li>
                        <?php endforeach; ?>
                    </ul>
                <?php endif; ?>
            <?php endif; ?>

            <!-- Expand -->
            <a href="#" class="btn btn-inverse btn-alt btn-separated btn-block btn-xs js-toggle-extended-input">
                <span class="glyphicon glyphicon-menu-down" aria-hidden="true"></span>
                <span class="hidden-xs"><?=$this->translate('Click here to explain contribution');?></span>
                <span class="glyphicon glyphicon-menu-down hidden-xs" aria-hidden="true"></span>
            </a>

            <?=$input->getElements()['expl']->setDecorators(['ViewHelper']);?>

            <!-- Counter -->
            <div class="text-right js-character-counter" style="display: none">
                <span id="inputs-<?=$input->getName();?>-expl_counter" class="counter">
                    <span class="counter-digit">2</span><span class="counter-digit">0</span><span class="counter-digit">0</span><span class="counter-digit">0</span>
                </span>
            </div>

        </fieldset>

        <?php $i++; ?>
    <?php endforeach; ?>

    <!-- Actions -->
    <div class="row">
        <div class="col-xs-12 text-center">
            <div class="offset-bottom-small">
                <div class="offset-bottom-xs-max visible-xs-block visible-sm-inline-block visible-md-inline-block visible-lg-inline-block">
                <?=$this->element->add_input_field->setDecorators(['ViewHelper']);?>
                </div>
                <div class="small visible-xs-block visible-sm-inline-block visible-md-inline-block visible-lg-inline-block">
                    <?=$this->translate('Click here for another contribution');?>
                </div>
            </div>

        </div>
        <div class="col-xs-12 col-sm-6 text-left text-center-xs">

            <div class="offset-bottom-xs-max">
                <?=$this->element->finished->setDecorators(['ViewHelper']);?>
            </div>

        </div>
        <div class="col-xs-12 col-sm-6 text-right text-center-xs">
            <?=$this->element->next_question->setDecorators(['ViewHelper']);?>
        </div>
    </div><!-- .row -->
</form><!-- .well -->
